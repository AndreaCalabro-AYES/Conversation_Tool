# Use an ARM-compatible Python 3.10 slim image
FROM arm32v7/python:3.10-slim

# Set environment variables
ENV DEBIAN_FRONTEND=noninteractive

# Set the working directory inside the container
WORKDIR /app

# Install system dependencies
RUN apt-get update && apt-get install -y \
    build-essential \
    git \
    curl \
    librdkafka-dev \
    wget \
    && apt-get clean

# Install TensorFlow 2.11.0 for ARM
RUN pip install tensorflow==2.11.0

# Install TensorFlow Addons and Text via pip
RUN pip install tensorflow-addons==0.19.0 \
    tensorflow-text==2.11.0

# Install Rasa 3.5.10 and other Python dependencies
RUN pip install rasa==3.5.10 \
    nltk==3.8.1 \
    scikit-learn==1.1.3

# Copy the application code into the container
COPY . .
